<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rainbow Tic Tac Toe</title>
<style>
    body {
        background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet);
        font-family: Arial, sans-serif;
        text-align: center;
        color: white;
        margin: 0;
        padding: 0;
    }
    h1 {
        font-size: 40px;
        text-shadow: 2px 2px 4px black;
    }
    .mode-select {
        margin: 20px;
    }
    button {
        background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
        color: white;
        font-size: 20px;
        border: none;
        padding: 10px 20px;
        margin: 10px;
        cursor: pointer;
        border-radius: 10px;
        font-weight: bold;
        text-shadow: 1px 1px 3px black;
    }
    button:hover {
        opacity: 0.9;
    }
    .board {
        display: grid;
        grid-template-columns: repeat(3, 120px);
        grid-gap: 10px;
        justify-content: center;
        margin: 30px auto;
    }
    .cell {
        width: 120px;
        height: 120px;
        font-size: 50px;
        font-weight: bold;
        color: white;
        text-shadow: 2px 2px 4px black;
        background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border-radius: 15px;
    }
    .cell.taken {
        cursor: not-allowed;
    }
    #status {
        font-size: 24px;
        margin-top: 20px;
        font-weight: bold;
    }
</style>
</head>
<body>
    <h1>🌈 Rainbow Tic Tac Toe 🌈</h1>
    <div class="mode-select">
        <button onclick="setMode('friend')">Play with Friend</button>
        <button onclick="setMode('computer')">Play vs Computer</button>
    </div>
    <div class="board" id="board"></div>
    <div id="status"></div>
    <button onclick="resetGame()">Restart Game</button>

<script>
    const boardElement = document.getElementById('board');
    const statusElement = document.getElementById('status');
    let board = ["", "", "", "", "", "", "", "", ""];
    let currentPlayer = "X";
    let gameActive = true;
    let mode = "friend"; // default mode

    function setMode(selectedMode) {
        mode = selectedMode;
        resetGame();
    }

    function createBoard() {
        boardElement.innerHTML = "";
        for (let i = 0; i < 9; i++) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.dataset.index = i;
            cell.addEventListener('click', handleCellClick);
            boardElement.appendChild(cell);
        }
    }

    function handleCellClick(e) {
        const index = e.target.dataset.index;
        if (board[index] !== "" || !gameActive) return;

        board[index] = currentPlayer;
        e.target.textContent = currentPlayer;
        e.target.classList.add('taken');

        if (checkWinner()) {
            statusElement.textContent = `${currentPlayer} Wins! 🎉`;
            gameActive = false;
            return;
        }

        if (!board.includes("")) {
            statusElement.textContent = "It's a Draw! 😐";
            gameActive = false;
            return;
        }

        currentPlayer = currentPlayer === "X" ? "O" : "X";

        if (mode === "computer" && currentPlayer === "O" && gameActive) {
            setTimeout(computerMove, 500);
        }
    }

    function computerMove() {
        let emptyCells = board.map((val, idx) => val === "" ? idx : null).filter(val => val !== null);
        const randomIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];
        board[randomIndex] = "O";
        const cell = document.querySelector(`.cell[data-index='${randomIndex}']`);
        cell.textContent = "O";
        cell.classList.add('taken');

        if (checkWinner()) {
            statusElement.textContent = "Computer Wins! 🤖";
            gameActive = false;
            return;
        }

        if (!board.includes("")) {
            statusElement.textContent = "It's a Draw! 😐";
            gameActive = false;
            return;
        }

        currentPlayer = "X";
    }

    function checkWinner() {
        const winPatterns = [
            [0,1,2],[3,4,5],[6,7,8],
            [0,3,6],[1,4,7],[2,5,8],
            [0,4,8],[2,4,6]
        ];

        return winPatterns.some(pattern => {
            return pattern.every(index => board[index] === currentPlayer);
        });
    }

    function resetGame() {
        board = ["", "", "", "", "", "", "", "", ""];
        currentPlayer = "X";
        gameActive = true;
        statusElement.textContent = "";
        createBoard();
    }

    createBoard();
</script>
</body>
</html>
